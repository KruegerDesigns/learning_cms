<?php include 'includes/functions.php'; ?>
<?php 
  // Page Settings
  $page_title = "Modern Theme - Form Results";
  $page_name = "Database Experiments";
  $page_template = "detail";
  $page_masthead_image_url = "/img/database.jpg";
?>

<?php include 'includes/site_head.php'; ?>
<?php include 'includes/site_svgs.php'; ?>

<div id="wrap">

  <!-- Navigation Bar -->
  <?php include 'includes/site_navbar.php'; ?>
  
  <!-- Masthead -->
  <?php include 'includes/site_masthead.php'; ?>
  
  <div class="container">
  
    <h1>Database Results</h1>

    <?php
      if ($_SERVER['REQUEST_METHOD'] == 'POST') {
        $par_name = htmlspecialchars($_POST['contact_name']);
        $par_email = htmlspecialchars($_POST['contact_email']);
        $par_options = htmlspecialchars($_POST['contact_options']);
        $par_radio = htmlspecialchars($_POST['contact_radio']);
        $par_message = htmlspecialchars($_POST['contact_message']);
        // Make this a function call, then move it to an include in the header.
        AddLeads($par_name, $par_email, $par_options, $par_radio, $par_message);
        // Show what was just added
    ?>
      <div class="table-wrap">
        <table>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Options</th>
            <th>Radio</th>
            <th>Message</th>
          </tr>
          <tr>
            <td><?= db_last_insert_id(); ?></td>
            <td><?= $par_name ?></td>
            <td><?= $par_email ?></td>
            <td><?= $par_options ?></td>
            <td><?= $par_radio ?></td>
            <td><?= $par_message ?></td>
          </tr>
        </table>
      </div>
    <?php
      } else {
        echo "<p>No new post data detected!</p>";
      }
    ?>
    
    <h2>Current Data Entrees (Leads Table)</h2>
    Below is a table of the current data that has been posted through the contact form.

    <div class="table-wrap">
      <table>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Options</th>
          <th>Radio</th>
          <th>Message</th>
        </tr>
        <?php EchoLeads(); ?>
      </table>
    </div>

  </div>
  
  <div class="stripe footer">
    <div class="container">
      <div class="flex-grid">
        <div class="col">
          <p class="heading"><strong>Navigation</strong></p>
          <?php include 'includes/site_nav.php'; ?>
        </div>
        <div class="col">
          <p class="heading"><strong>Contact &amp; Copyright</strong></p>
          <p>
            Phone: (123) 456-7890
            <br>Designed and Developed by Adam Krueger
            <br> &copy; Copyright 2016-2017
          </p>
        </div>
      </div>
    </div>
  </div>
    
</div>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
  <script src="/js/index.js"></script>
</body>
</html>
